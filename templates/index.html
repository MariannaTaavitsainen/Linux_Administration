<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Oma LEMP-sivu</title>
    <style>
        body { 
            font-family: sans-serif; 
            background-color: #333333; 
            color: rgba(219, 21, 97, 1); 
            text-align: center; 
            padding-top: 50px; 
        }
        .time { 
            font-size: 2em; 
            margin-top: 30px;
        }

        /* Kuvalle kontti */
        .image-container {
            position: relative;
            width: 100%;
            max-width: 400px;  /* maksimileveys ruudulle */
            margin: 0 auto;     /* keskitys vaakasuunnassa */
            padding: 50px 0;    /* ylimääräinen tila ylä- ja alapuolella */
            overflow: visible;
            padding-bottom: 250px; /* tarpeeksi tilaa kuvan skaalausta varten */
        }

        /* Kuva liukuu keskellä ja skaalaa kulmittain */
        .moving-image {
            display: block;
            margin: 0 auto; 
            max-width: 100%;
            height: auto;
            border: 2px solid #fff;
            border-radius: 8px;
            transform: scale(1,1);
        }
    </style>
</head>
<body>
    <h1>Tervetuloa sivulleni!</h1>
    <p>Oli helppoa. Joilleki.</p>

    <div class="image-container">
        <img src="https://images.cdn.yle.fi/image/upload/w_1024,dpr_1.0,fl_lossy,f_auto,q_auto,d_yle-elava-arkisto.jpg/v1599560995/13-26-108691.jpg"
             alt="Tonnin seteli"
             class="moving-image"
             id="moving-image">
    </div>

    <h2>SQL UTC-aika:</h2>
    <div class="time" id="utc-time">{{ utc_time }}</div>

    <script>
        // Päivittyvä UTC-aika
        async function updateTime() {
            try {
                const response = await fetch('/api/utc-time');
                const data = await response.json();
                document.getElementById('utc-time').textContent = data.utc_time;
            } catch (err) {
                console.error("Virhe päivitettäessä aikaa:", err);
            }
        }
        setInterval(updateTime, 1000);

        // Kulmaskaalaus (X ja Y) loop
        const img = document.getElementById("moving-image");
        let scaleX = 1, scaleY = 1;
        let growing = true;
        const speed = 0.0025; // puolta hitaampi kuin alkuperäinen

        function animateImage() {
            if (growing) {
                scaleX += speed;
                scaleY += speed;
                if (scaleX >= 2 || scaleY >= 2) growing = false;
            } else {
                scaleX -= speed;
                scaleY -= speed;
                if (scaleX <= 1 || scaleY <= 1) growing = true;
            }

            img.style.transform = `scale(${scaleX}, ${scaleY})`;

            requestAnimationFrame(animateImage);
        }

        animateImage();
    </script>
</body>
</html>
